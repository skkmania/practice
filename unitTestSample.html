<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">
<head>
  <title>Page title</title>
  <script src="scriptaculous/lib/prototype.js" type="text/javascript"></script>
  <script src="scriptaculous/src/util.js" type="text/javascript"></script>
  <script src="scriptaculous/src/unittest.js" type="text/javascript"></script>
  <!-- other JavaScript includes -->
  <script>
// 領域の背景色などを変更
function setBgColor( bgColor )  {
  $( 'demo' ).setStyle( ( bgColor ) ?
    { 'backgroundColor' : bgColor, 'color' : 'white', 'fontWeight' : 'bold' } :
    { 'backgroundColor' : '', 'color' : '', 'fontWeight' : '' }
  );
}
// ボタンクリック時の処理を行うイベントハンドラ
function buttonClick( ev )  {
  setBgColor( ev.target.id );   // 領域の背景をid属性の値と同じ色にする
}
Event.observe( window, 'load', function()  {
  // ボタンクリック時のイベントハンドラを登録
  $$( 'button' ).invoke( 'observe', 'click', buttonClick );
} );
  </script>
  <link rel="stylesheet" href="scriptaculous/test/test.css" type="text/css" />
  <link rel="stylesheet" href="style/test.css" type="text/css" />
</head>
<body>


<!-- here go any elements you do the testing on -->
<div id="demo">
  <button id="red">赤</button>
  <button id="green">緑</button>
  <button id="blue">青</button>
  <button>リセット</button>
  <br />キーやボタンによって色がつく要素
</div>


<!-- Tests -->
<script type="text/javascript" language="javascript">
// <![CDATA[
var testcases = {
  setup : function()  {  with( this )  {
    // 領域を初期化
    $( 'demo' ).setStyle( { 'backgroundColor' : '', 'color' : '', 'fontWeight' : '' } );
  } },
  teardown : function()  {  with( this )  {
    /* ..... テストの後処理(省略) ..... */
  } },
  testRed : function() {  with( this )  {
    // 領域を赤色にするテスト
    var color = 'red';
    // ボタンをクリック(そうでなければイベントハンドラを実行)
    try  {
      new Event.simulateMouse( color, 'click' );
    }  catch( e )  {
      buttonClick( { target : { id : color } } );
    }
    // 領域の背景色が'red'なら動作は正常
    assertEqual( color, $( 'demo' ).getStyle( 'backgroundColor' ) );
  } },
  testGreen : function() {  with( this )  {
    /* ..... 領域を緑色にするテスト(省略) ..... */
    var color = 'green';
    try  {
      new Event.simulateMouse( color, 'click' );
    }  catch( e )  {
      buttonClick( { target : { id : color } } );
    }
    assertEqual( color, $( 'demo' ).getStyle( 'backgroundColor' ) );
  } },
  testBlue : function() {  with( this )  {
    /* ..... 領域を青色にするテスト(省略) ..... */
    var color = 'blue';
    try  {
      new Event.simulateMouse( color, 'click' );
    }  catch( e )  {
      buttonClick( { target : { id : color } } );
    }
    assertEqual( color, $( 'demo' ).getStyle( 'backgroundColor' ) );
  } }
};
new Test.Unit.Runner( testcases, 'testlog' );
// ]]>
</script>
<!-- Log output -->
<div>テスト結果の出力先</div>
<div id="testlog"></div>
</body>
</html>

